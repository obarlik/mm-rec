#pragma once

namespace mm_rec {
namespace assets {

constexpr char INDEX_HTML[] = "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>MM-Rec Dashboard</title>\n    <link rel=\"stylesheet\" href=\"/static/style.css\">\n    <script src=\"https://unpkg.com/navigo@8.11.1/lib/navigo.min.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n</head>\n<body>\n    <div id=\"app\"></div>\n    <script src=\"/static/app.js\"></script>\n</body>\n</html>\n";
constexpr char STYLE_CSS[] = "* { margin: 0; padding: 0; box-sizing: border-box; }\n:root {\n    --bg: #0f172a; --sidebar: #1e293b; --card: #1e293b;\n    --text: #f8fafc; --text-muted: #94a3b8; --accent: #38bdf8;\n    --success: #22c55e; --danger: #ef4444; --border: #334155;\n}\nbody { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; }\n\n/* Sidebar */\n.sidebar { position: fixed; left: 0; top: 0; width: 240px; height: 100vh; background: var(--sidebar); display: flex; flex-direction: column; border-right: 1px solid var(--border); z-index: 100; }\n.sidebar-header { padding: 20px; border-bottom: 1px solid var(--border); }\n.sidebar-header h1 { font-size: 1.25rem; background: linear-gradient(135deg, var(--accent), #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }\n.sidebar-nav { flex: 1; padding: 20px 0; }\n.nav-item { display: flex; align-items: center; padding: 12px 20px; color: var(--text-muted); text-decoration: none; transition: 0.2s; cursor: pointer; border-left: 3px solid transparent; }\n.nav-item:hover { background: rgba(56, 189, 248, 0.1); color: var(--accent); }\n.nav-item.active { background: rgba(56, 189, 248, 0.15); color: var(--accent); border-left-color: var(--accent); }\n.nav-item i { width: 20px; margin-right: 12px; }\n\n/* Main Content */\n.main { margin-left: 240px; flex: 1; display: flex; flex-direction: column; overflow: hidden; }\n.top-bar { background: var(--sidebar); padding: 16px 24px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; }\n.top-bar-title { font-size: 1.25rem; font-weight: 600; }\n.btn { padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; transition: 0.2s; }\n.btn-primary { background: var(--accent); color: var(--bg); }\n.btn-danger { background: var(--danger); color: white; }\n.btn:hover { transform: translateY(-1px); }\n\n/* Views */\n.view { flex: 1; overflow-y: auto; padding: 24px; display: none; }\n.view.active { display: block; }\n.cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 24px; }\n.card { background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid var(--border); }\n.card-title { font-size: 0.875rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 8px; }\n.card-value { font-size: 2rem; font-weight: 700; }\n\n/* Table */\ntable { width: 100%; border-collapse: collapse; }\nth, td { padding: 12px; text-align: left; border-bottom: 1px solid var(--border); }\nth { font-size: 0.875rem; color: var(--text-muted); font-weight: 600; }\n.badge { padding: 4px 12px; border-radius: 12px; font-size: 0.75rem; font-weight: 600; }\n.badge-success { background: rgba(34, 197, 94, 0.2); color: var(--success); }\n.badge-muted { background: rgba(148, 163, 184, 0.2); color: var(--text-muted); }\n";
constexpr char APP_JS[] = "<script>\n// Components\nfunction Sidebar() {\n    return `\n        <div class=\"sidebar\">\n            <div class=\"sidebar-header\"><h1>MM-Rec</h1></div>\n            <nav class=\"sidebar-nav\">\n                <a href=\"#/\" class=\"nav-item\" data-view=\"training\">\n                    <i class=\"fas fa-chart-line\"></i><span>Training</span>\n                </a>\n                <a href=\"#/runs\" class=\"nav-item\" data-view=\"runs\">\n                    <i class=\"fas fa-list\"></i><span>Runs</span>\n                </a>\n                <a href=\"#/hardware\" class=\"nav-item\" data-view=\"hardware\">\n                    <i class=\"fas fa-microchip\"></i><span>Hardware</span>\n                </a>\n            </nav>\n        </div>\n    `;\n}\n\nfunction TopBar() {\n    return `\n        <div class=\"top-bar\">\n            <div class=\"top-bar-title\">Training Dashboard</div>\n            <div>\n                <button class=\"btn btn-danger\" onclick=\"fetch('/api/stop')\">\n                    <i class=\"fas fa-stop\"></i> Stop\n                </button>\n            </div>\n        </div>\n    `;\n}\n\nfunction TrainingView() {\n    return `\n        <div id=\"training-view\" class=\"view active\">\n            <div class=\"cards\">\n                <div class=\"card\"><div class=\"card-title\">Loss</div><div class=\"card-value\" id=\"loss\">--</div></div>\n                <div class=\"card\"><div class=\"card-title\">Step</div><div class=\"card-value\" id=\"step\">--</div></div>\n                <div class=\"card\"><div class=\"card-title\">Speed</div><div class=\"card-value\" id=\"speed\">--</div></div>\n                <div class=\"card\"><div class=\"card-title\">GPU Ratio</div><div class=\"card-value\" id=\"gpu_ratio\">--</div></div>\n            </div>\n            <div class=\"card\"><canvas id=\"chart\"></canvas></div>\n        </div>\n    `;\n}\n\nfunction RunsView() {\n    return `\n        <div id=\"runs-view\" class=\"view\">\n            <div class=\"card\">\n                <h2>Training Runs</h2>\n                <table><thead><tr>\n                    <th>Name</th><th>Status</th><th>Epoch</th><th>Loss</th><th>Size</th><th>Actions</th>\n                </tr></thead>\n                <tbody id=\"runs-table\"><tr><td colspan=\"6\">Loading...</td></tr></tbody></table>\n            </div>\n        </div>\n    `;\n}\n\nfunction HardwareView() {\n    return `\n        <div id=\"hardware-view\" class=\"view\">\n            <div class=\"card\">\n                <h2>Hardware</h2>\n                <table>\n                    <tr><td>Processor</td><td id=\"hw-cpu\">Loading...</td></tr>\n                    <tr><td>Architecture</td><td id=\"hw-arch\">-</td></tr>\n                    <tr><td>Memory</td><td id=\"hw-ram\">-</td></tr>\n                    <tr><td>Compute</td><td id=\"hw-compute\">-</td></tr>\n                </table>\n            </div>\n        </div>\n    `;\n}\n\n// Render\ndocument.getElementById('app').innerHTML = `\n    ${Sidebar()}\n    <div class=\"main\">\n        ${TopBar()}\n        ${TrainingView()}\n        ${RunsView()}\n        ${HardwareView()}\n    </div>\n`;\n\n// Chart\nconst chart = new Chart(document.getElementById('chart'), {\n    type: 'line',\n    data: { labels: [], datasets: [{ label: 'Loss', data: [], borderColor: '#38bdf8', tension: 0.4 }] },\n    options: { responsive: true, maintainAspectRatio: false }\n});\n\n// Router\nconst router = new Navigo('/', { hash: true });\n\nfunction showView(view) {\n    document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));\n    document.getElementById(view + '-view').classList.add('active');\n    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));\n    document.querySelector(`[data-view=\"${view}\"]`).classList.add('active');\n}\n\nrouter\n    .on('/', () => showView('training'))\n    .on('/runs', async () => {\n        showView('runs');\n        const r = await fetch('/api/runs');\n        const runs = await r.json();\n        document.getElementById('runs-table').innerHTML = runs.map(x => \n            `<tr><td>${x.name}</td><td><span class=\"badge badge-${x.status === 'RUNNING' ? 'success' : 'muted'}\">${x.status}</span></td>\n            <td>${x.epoch}</td><td>${x.loss > 0 ? x.loss.toFixed(3) : '-'}</td><td>${x.size_mb} MB</td></tr>`\n        ).join('');\n    })\n    .on('/hardware', async () => {\n        showView('hardware');\n        const h = await fetch('/api/hardware');\n        const hw = await h.json();\n        document.getElementById('hw-cpu').textContent = hw.cpu_model;\n        document.getElementById('hw-arch').textContent = hw.arch;\n        document.getElementById('hw-ram').textContent = (hw.mem_total_mb / 1024).toFixed(1) + ' GB';\n        document.getElementById('hw-compute').textContent = hw.compute_device;\n    })\n    .resolve();\n\n// Stats polling\nasync function fetchStats() {\n    try {\n        const r = await fetch('/api/stats');\n        const d = await r.json();\n        document.getElementById('loss').textContent = d.loss?.toFixed(4) || '--';\n        document.getElementById('step').textContent = d.step || '--';\n        document.getElementById('speed').textContent = d.speed?.toFixed(1) || '--';\n        document.getElementById('gpu_ratio').textContent = d.gpu_ratio?.toFixed(2) || '--';\n        if (d.history?.length > 0) {\n            chart.data.labels = d.history.map((_, i) => i);\n            chart.data.datasets[0].data = d.history;\n            chart.update();\n        }\n    } catch (e) {}\n}\n\n// Run management functions\nasync function resumeRun(name) {\n    if (confirm(`Resume training run: ${name}?`)) {\n        await fetch(`/api/runs/resume/${name}`, { method: 'POST' });\n        router.navigate('/runs'); // Refresh runs view\n    }\n}\n\nasync function stopRun(name) {\n    if (confirm(`Stop training run: ${name}?`)) {\n        await fetch(`/api/runs/stop/${name}`, { method: 'POST' });\n        setTimeout(() => router.navigate('/runs'), 500); // Refresh after stop\n    }\n}\n\nasync function deleteRun(name) {\n    if (confirm(`Delete training run: ${name}? This cannot be undone!`)) {\n        await fetch(`/api/runs/delete/${name}`, { method: 'DELETE' });\n        router.navigate('/runs'); // Refresh runs view\n    }\n}\n\nsetInterval(fetchStats, 1000);\nfetchStats();\n</script>\n";

} // namespace assets
} // namespace mm_rec
